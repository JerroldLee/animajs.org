define("anima-app/1.0.0/index",["anima-yocto/1.0.1/index","anima-underscore/1.0.0/index","anima-scroll/1.0.0/index","anima-yocto/1.0.0/index","anima-fx/1.0.0/index"],function(t,e,n){{var i=window.$=t("anima-yocto/1.0.1/index"),a=t("anima-underscore/1.0.0/index"),s=t("anima-scroll/1.0.0/index");t("anima-fx/1.0.0/index")}a.substitute=function(t,e,n){return String(t).replace(n||/\\?\{([^{}]+)\}/g,function(t,n){if("\\"==t.charAt(0))return t.slice(1);if(null!=e[n])return e[n];var i,a=n.split("."),s=a.length,r=e;if(1>=s)return t;for(i=0;s>i;i++)if(null==(r=r[a[i]]))return t;return r})};var r=function(t,e,n){function o(){var t=this;t.move=null,t.transition=null,t.datas=null,t._states=[],t._stateIdx=0,t._stateLimit=100}function l(t){var e=t.ready,n=t.startup,i=t.teardown,a=t.show,s=t.hide;t.isReady=!1,t.persisted=!1,t.ready=function(n){t.isReady||(this.trigger("page:ready",n),m.pluginHook("pageReady",t,n),this.log("[Page Ready]["+t.name+"]"),e.call(t),this.isReady=!0)},t.startup=function(e){this.trigger("page:startup"),m.pluginHook("pageStartup",t,e),this.log("[Page Startup]["+t.name+"]"),n.apply(t,arguments)},t.show=function(e){this.trigger("page:show",e),m.pluginHook("pageShow",t,e),this.log("[Page Show]["+t.name+"]"),a.call(t,this.persisted),this.persisted=!0},t.hide=function(e){this.trigger("page:hide",e),m.pluginHook("pageHide",t,e),this.log("[Page Hide]["+t.name+"]"),s.call(t,this.persisted)},t.teardown=function(e){this.trigger("page:teardown",e),m.pluginHook("pageTeardown",t,e),this.log("[Page Teardown]["+t.name+"]"),i.call(t),this.persisted=!1},t.html=function(t){this.el.innerHTML=t}}function h(){}function c(t,e){this.options=e,this.wrapEl=t,this.wrapEl.appendChild(this.animWrapEl=g.createElement("div")),this.animWrapEl.className=e.cls,this.animWrapEl.innerHTML=a.substitute(e.tpl.title,{title:""}),this.wrapEl.style.height=this.animWrapEl.offsetHeight+"px",this.animWrapEl.style.cssText="position: absolute; width: 100%; top: 0; z-index: 99;"}var u=window,g=u.document,p=window.navigator.appVersion.match(/iphone|ipad/gi),d=[],f=(d.push,d.slice),m=(d.splice,this);a.isObject(e)||(a.isFunction(e)&&(n=e),e={}),m.options={enableScroll:!1,enableNavbar:!1,enableToolbar:!1,enableTransition:!0,enableMessageLog:!1,raiseErrors:!1,headerCls:"am-header",cacheLength:5,plugins:{},initPage:"",headerTpl:{title:"<h1>{title}</h1>",btnLeft:'<a class="am-header-reverse am-header-reverse-btn">{text}</a>',btnRight:'<a class="am-header-operate am-header-operate-btn">{text}</a>'},transTimes:300,highAnims:p};for(var v in e)m.options[v]=e[v];m.element=g.querySelector(t)||g.body,m.contentEl=m.element.querySelector(".content"),m.navbarEl=m.element.querySelector(".navbar"),m.toolbarEl=m.element.querySelector(".toolbar"),m.viewHeight=m.options.enableScroll?u.innerHeight:m.element.offsetHeight,m.page={},m.options.enableMessageLog=m.options.raiseErrors||m.options.enableMessageLog,m.plugins=m.options.plugins,m.router=function(t,e,n){return this.log("[Router][Registration]["+t+"]"),this.Router.route(t,e,n),m.pluginHook("addRouter",t),this},m.refreshContent=function(){var t=this.viewHeight;t=t<u.innerHeight?u.innerHeight:t,this.options.enableNavbar&&(t-=this.navbarEl.offsetHeight),this.options.enableToolbar&&(t-=this.toolbarEl.offsetHeight),this.contentEl.style[this.options.enableScroll?"height":"minHeight"]=t+"px"},m.RenderContext=function(){var t=a.toArray(arguments),e=t[0],n=t[1],i=t[2],s=t[3],r=t[4]||"default",o=t[5]||{},l=m.RouterInstances[e]||(m.RouterInstances[e]=new q(n));return l.render(e,i,s,r,o),l},m.getPage=function(t){var t=t||"default";return pages[t]},m.use=function(){var t=a.toArray(arguments),e=t.shift(),n=e||"";try{t.unshift(this),"string"==typeof e&&(n="Plugin."+e,e=r[e]),e.apply(this,t)}catch(i){"undefined"==typeof e?this.error("Plugin Error: called plugin() but plugin ("+n.toString()+") is not defined",i):a.isFunction(e)?this.error("Plugin Error",i):this.error("Plugin Error: called plugin() but '"+n.toString()+"' is not a function",i)}return this},m.helpers=function(t){return a.extend(q.prototype,t),this},m.helper=function(t,e){return q.prototype[t]=e,this};var w=function(){this.handlers=[],this.state=new o,a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},b=/^[#\/]|\s+$/g,y=/^\/+|\/+$/g,x=/msie [\w.]+/,_=/\/$/,E=/#.*$/;w.started=!1,a.extend(w.prototype,N,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(_,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(b,"")},start:function(t){if(w.started)throw new Error("history has already been started");w.started=!0,this.options=a.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),n=document.documentMode,s=x.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(y,"/"),this._hasPushState?i(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?i(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var r=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&r.hash&&(this.fragment=this.getHash().replace(b,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){i(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),w.started=!1},route:function(t,e){return this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t,e){return t=this.fragment=this.getFragment(t),a.any(this.handlers,function(n){return n.route.test(t)?(n.callback(t,e),!0):void 0})},navigate:function(t,e){if(!w.started)return!1;e&&e!==!0||(e={trigger:!1});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(E,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?void 0:this.loadUrl(t,e)}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e},pop:function(t){var e=this.state,n=e.getIndex();0!==n&&(e.move="backward",e.transition="backward",console.log(e),t&&"forward"===t.transition&&(e.transition="forward"),this.history.back())}}),m.History=new w;var S=function(){this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,H=/(\(\?)?:\w+/g,T=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g,C=/(\(\?)?(:|\*)\w+/g;a.extend(S.prototype,N,{initialize:function(){},route:function(t,e,n){var i=t.match(C)||[];a.isFunction(e)&&(n=e,e=t),a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(n)||this.error("callback is not find");{var s=this;m.History.route(t,function(a,r){var o=s._extractParameters(t,a,i);s.execute(e,n,o,a,t,r)})}},execute:function(t,e){e&&m.RenderContext.apply(m,arguments)},navigate:function(t,e){return m.History.navigate(t,e),this},_routeToRegExp:function(t){return t=t.replace(P,"\\$&").replace(k,"(?:$1)?").replace(H,function(t,e){return e?t:"([^/?]+)"}).replace(T,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e,n){var i=t.exec(e).slice(1);i=a.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null});for(var s={query:i.pop()},r=0;r<n.length;r++)s[n[r].replace(/(:|\*)/,"")]=i[r];return s}}),m.Router=new S;var L=[];"undefined"!=typeof window.console?L.push("function"==typeof window.console.log&&a.isFunction(window.console.log.apply)?function(){window.console.log.apply(window.console,arguments)}:function(){window.console.log(arguments)}):"undefined"!=typeof console&&L.push(function(){console.log.apply(console,arguments)}),m.log=function(){var t=a.toArray(arguments);if(!m.options.enableMessageLog)return!1;var e=new Date,n=[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()];t.unshift("color:blue"),t.unshift("color:green"),t.unshift("%c["+n.join(":")+"]%c %s"),i.each(L,function(e,n){n.apply(m,t)})},m.error=function(t,e){if(e||(e=new Error),e.message=[t,e.message].join(" "),m.trigger("error",{message:e.message,error:e}),m.options.raiseErrors)throw e;m.log(e.message,e)};var N={on:function(t,e,n){if(!R(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!R(this,"once",t,[e,n])||!e)return this;var i=this,s=a.once(function(){i.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,n)},off:function(t,e,n){var i,s,r,o,l,h,c,u;if(!this._events||!R(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:a.keys(this._events),l=0,h=o.length;h>l;l++)if(t=o[l],r=this._events[t]){if(this._events[t]=i=[],e||n)for(c=0,u=r.length;u>c;c++)s=r[c],(e&&e!==s.callback&&e!==s.callback._callback||n&&n!==s.context)&&i.push(s);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=f.call(arguments,1);if(!R(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&A(n,e),i&&A(i,arguments),this},stopListening:function(t,e,n){var i=this._listeningTo;if(!i)return this;var s=!e&&!n;n||"object"!=typeof e||(n=this),t&&((i={})[t._listenId]=t);for(var r in i)t=i[r],t.off(e,n,this),(s||a.isEmpty(t._events))&&delete this._listeningTo[r];return this}},I=/\s+/,R=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var a in n)t[e].apply(t,[a,n[a]].concat(i));return!1}if(I.test(n)){for(var s=n.split(I),r=0,o=s.length;o>r;r++)t[e].apply(t,[s[r]].concat(i));return!1}return!0},A=function(t,e){var n,i=-1,a=t.length,s=e[0],r=e[1],o=e[2];switch(e.length){case 0:for(;++i<a;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<a;)(n=t[i]).callback.call(n.ctx,s);return;case 2:for(;++i<a;)(n=t[i]).callback.call(n.ctx,s,r);return;case 3:for(;++i<a;)(n=t[i]).callback.call(n.ctx,s,r,o);return;default:for(;++i<a;)(n=t[i]).callback.apply(n.ctx,e);return}},M={listenTo:"on",listenToOnce:"once"};a.each(M,function(t,e){N[e]=function(e,n,i){var s=this._listeningTo||(this._listeningTo={}),r=e._listenId||(e._listenId=a.uniqueId("l"));return s[r]=e,i||"object"!=typeof n||(i=this),e[t](n,i,this),this}}),a.extend(m,N),m.Events=N;var W=function(t,e){this._wrapEl=t,this._cacheLength=Math.max(e.cacheLength,1),this._cacheIndex=0;for(var n="",i=0;i<this._cacheLength;i++)n+='<section class="inactive" index="'+i+'"></section>';this._wrapEl.innerHTML='<div class="wrap">'+n+'</div><div class="trans"><div></div></div>',this.contentEl=this._wrapEl.childNodes[0],this.transEl=this._wrapEl.childNodes[1],this.transShadeEl=this.transEl.childNodes[0],this.setClassName(),m.scroll=new s(this.contentEl).init()},U={switchTransition:function(t,e){var n=this,a=n.contentEl.getBoundingClientRect().width;n.transEl.style.display="block",n.transShadeEl.style["backward"==t?"right":"left"]=a+"px",i(n.transShadeEl).animate({translateX:"backward"==t?"100%":"-100%"},m.transTimes,"ease-in-out",function(){n.transEl.style.cssText=" ",n.transShadeEl.style.cssText=" ",e&&e()})},switchTransitionIos:function(t,e,n,a){{var s=this;s.contentEl.getBoundingClientRect().width}e.style.cssText="display: block;position: absolute; width: 100%; top: 0; bottom:0; z-index: 99;-webkit-transform: translateX("+("backward"==n?"-320px":"320px")+"); -webkit-backface-visibility: hidden; -webkit-transform-style: preserve-3d;",i(t).animate({translateX:"backward"==n?"100px":"-100px"},m.transTimes,"ease-in-out",function(){t.style.cssText=" ",a&&a()}),i(e).animate({translateX:"0px"},m.transTimes,"ease-in-out",function(){e.style.cssText=" "})},setClassName:function(){this.getActive().className="active",this._cacheLength>2?(this.getPrevious().className="inactive prev",this.getNext().className="inactive next"):this._cacheLength>1&&(this.getPrevious().className="inactive")},getActive:function(){var t=this._cacheIndex;return this.contentEl.childNodes[t]},getNext:function(){var t=(this._cacheIndex+1)%this._cacheLength;return this.contentEl.childNodes[t]},getPrevious:function(){var t=(this._cacheIndex-1+this._cacheLength)%this._cacheLength;return this.contentEl.childNodes[t]},next:function(){this._cacheLength>2&&(this.getPrevious().className="inactive"),this._cacheIndex=(this._cacheIndex+1)%this._cacheLength},previous:function(){this._cacheLength>2&&(this.getNext().className="inactive"),this._cacheIndex=(this._cacheIndex-1+this._cacheLength)%this._cacheLength},html:function(t){this.getActive().innerHTML=t}};for(var B in U)W.prototype[B]=U[B];var F={reset:function(){var t=this;t.move=null,t.transition=null,t.datas=null,t.type=null,t._states=[],t._stateIdx=0,t._stateLimit=100},pushState:function(t,e,n,i){var a=this,s=a._states,r=a._stateIdx,l=a._stateLimit,h=s.length,c=a.move,u=a.transition,g=a.datas,p=a.type,d=s[r-1],f=s[r+1],m={name:t,fragment:e,type:p,params:n||{},datas:g||{}};for(var v in i)m.datas[v]=i[v];return null==c&&(u=c=!g&&o.isEquals(d,m)?"backward":"forward"),"backward"===c?0===r&&h>0?s.unshift(m):r>0&&(r--,m=d):"forward"===c?r===l-1?(s.shift(),s.push(m),m.referer=location.href.replace(/#[^#]*/,"#"+s[r-1].fragment)):0===r&&0===h?(s.push(m),m.referer=document.referer||""):!g&&o.isEquals(f,m)?(r++,m=f):o.isEquals(s[r],m)?m=s[r]:(r++,s.splice(r),s.push(m),m.referer=location.href.replace(/#[^#]*/,"#"+s[r-1].fragment)):"replace"===c&&(m.referer=location.href.replace(/#[^#]*/,"#"+s[r].fragment),s[r]=m),m.move=c,m.transition=u,m.index=r,a.move=null,a.transition=null,a.datas=null,a._stateIdx=r,m},getState:function(){return this._states[this._stateIdx]},getIndex:function(){return this._stateIdx}};for(var B in F)o.prototype[B]=F[B];o.isEquals=function(t,e){return t&&e?t.name!==e.name||t.fragment!==e.fragment?!1:!0:!1},m.pages={},m.RouterInstances={};var $={},q=function(t){return this._state=null,this.state=m.History.state,this.callback=t,this.isSamePage,this.isSameState,this};a.extend(q.prototype,N,{render:function(t,e,n,i,a){this.args=e,this.name=t,this.fragment=n,this.route=i,this.datas=a.data,this.move=a.move,this.callback&&this.callback.apply(this)},loaded:{},load:function(t){var e=this;e.loaded[t]?e.renderPage(e.loaded[t]):(m.log("[Page][Loading]"),m.pluginHook("loadStart",t),seajs.use(t,function(n){e.loaded[t]=n,m.pluginHook("loadEnd",t,n),e.renderPage(n)}))},renderPage:function(t){var e,n;if(t.name=this.name||this.route,this.trigger("page:render",t),m.log("[Page][renderPage]"),m.page.lastState&&(this.isSamePage=m.page.lastState.name===t.name,this.isSameState=m.page.lastState.fragment===t.fragment),!this.isSamePage){this._state=this.state.pushState(this.name||this.route,this.fragment,this.args,this.datas),this.move&&(this._state.move=this.move),m.pages[this.route]?e=m.pages[this.route]:(e=m.pages[this.route]=a.extend(new h,t),l.call(this,e),e.ready()),"default"==this.route&&(this._state.isDefault=!0);var s=m.Content.getActive();if("backward"===this._state.move?m.Content.previous():m.Content.next(),e.el=m.Content.getActive(),i(e.el).off(),e.events)for(var r=0;r<e.events.length;r++){var o=e.events[r][2];"string"==typeof o&&(o=e[e.events[r][2]]);var c=function(t){return function(n){n.preventDefault(),t&&t.call(e,n)}}(o);i(e.el).on(toolbar.events[r][0],toolbar.events[r][1],c)}i(m.toolbarEl).off().html(""),m.options.enableTransition&&m.page.lastPage?(this.setNavbar(e,this._state,!0),m.pluginHook("pageBeforeSwitch",e,n),m.options.highAnims?m.Content.switchTransitionIos(s,e.el,this._state.move,function(){m.Content.setClassName(),m.pluginHook("pageAfterSwitch",e,n)}):m.Content.switchTransition(this._state.move,function(){m.Content.setClassName(),m.pluginHook("pageAfterSwitch",e,n)})):(this.setNavbar(e,this._state),m.Content.setClassName()),this.showPage(e,this._state)}},setNavbar:function(t,e){if(!m.options.enableNavbar)return!1;var n=t.title,i=t.buttons;if(i)for(var a=0;a<i.length;a++){var s=i[a],r=s.handler;s.id||(s.id="btn-"+Date.now()+"-"+parseInt(10*Math.random())),"string"==typeof r&&(r=t[r]),"back"===s.type&&(s.hide=s.autoHide!==!1&&e.index<1,r||(r=function(){m.History.pop()})),s.handler=function(n){return function(i){i.preventDefault(),n&&n.call(t,i,e.index)}}(r)}else i=[{id:"back",type:"back",text:"back",hide:e.index<1?!0:!1,handler:function(){m.History.pop()}}];if(this.isSamePage||!m.page.lastPage){m.Navbar.resetNavbar(),m.Navbar.setTitle(n);for(var a=0;a<i.length;a++)m.Navbar.setButton(i[a])}else m.Navbar.switchNavbar(n,e.move,i)},setToolbar:function(t){var e=t.toolbar;if(m.toolbarEl.innerHTML="",m.options.enableToolbar&&e){e.html&&(m.toolbarEl.innerHTML=e.html),e.el&&((m.toolbarEl.innerHTML="")||m.toolbarEl.appendChild(e.el)),!e.events&&(e.events=[]);for(var n=0;n<e.events.length;n++){var a=e.events[n][2];"string"==typeof a&&(a=t[e.events[n][2]]);var s=function(e){return function(n){n.preventDefault(),e&&e.call(t,n)}}(a);i(m.toolbarEl).on(e.events[n][0],e.events[n][1],s)}}},showPage:function(t,e){var n=t.el.getAttribute("data-fragment"),i=$[n];this.isSameState||this.isSamePage&&e.isDefault||(m.page.lastPage&&m.page.lastPage.hide(m.page.lastState),n===e.fragment||this.isSamePage||(i&&(i.page.teardown(i.state),delete $[n]),$[e.fragment]={state:e,page:t},t.el.innerHTML="",t.el.setAttribute("data-fragment",e.fragment),t.startup.apply(this,e)),t.show.apply(this,e),this.setToolbar(t),m.refreshContent(),m.page.lastPage=t,m.page.lastState=e)},redirect:function(t,e){var e=e||{};this.trigger("page:redirect",arguments),m.log("[Page][Redirect]"),e.move||(e.move="forward"),m.Router.navigate(t,e)},getReferer:function(){return this.state.getState().referer},getParameter:function(t){var e=this.state.getState();return e.params[t]||e.datas[t]},getParameters:function(){var t={};for(var e in this.args)t[e]=this.args[e];for(var e in this.datas)t[e]=this.datas[e];return t},setData:function(t,e){this.state.getState().datas[t]=e},log:function(){m.log.apply(m,arguments)}}),a.extend(h.prototype,N,{ready:function(){},startup:function(){},teardown:function(){},show:function(){},hide:function(){},log:function(){m.log.apply(m,arguments)}}),a.extend(c.prototype,{setTitle:function(t){"string"==typeof t&&(this.animWrapEl.innerHTML=a.substitute(this.options.tpl.title,{title:t}))},setButton:function(t){var e=i(a.substitute(this.options.tpl["back"==t.type||"left"==t.type?"btnLeft":"btnRight"],t.text))[0];this.animWrapEl.appendChild(e),null!=t.id&&e.setAttribute("data-id",t.id),null!=t["class"]&&(e.className=t["class"]),null!=t.text&&(e.innerHTML=t.text),null!=t.bg&&(e.style.background=t.bg),null!=t.icon&&(e.innerHTML='<img src="'+t.icon+'" border="0" width="100%" height="100%" />'),e.style.display=t.hide===!0?"none":"",t.onChange&&t.onChange.call(e,t),t.handler&&(e.handler&&e.removeEventListener("click",e.handler,!1),e.addEventListener("click",e.handler=t.handler,!1))},switchNavbar:function(t,e,n){var s=this,r=this.animWrapEl;this.removeButton(),this.wrapEl.appendChild(this.animWrapEl=g.createElement("div")),this.animWrapEl.className=this.options.cls,this.animWrapEl.innerHTML=a.substitute(this.options.tpl.title,{title:t}),this.wrapEl.style.height=this.animWrapEl.offsetHeight+"px",this.animWrapEl.style.cssText="position: absolute; width: 100%; top: 0; z-index: 99;";var o=r.getBoundingClientRect().width;this.animWrapEl.style.zIndex="999",this.animWrapEl.style["backward"==e?"right":"left"]=o+"px",i(this.animWrapEl).trigger(i.fx.animationEnd).off(i.fx.animationEnd).animate({translateX:"backward"==e?"100%":"-100%"},m.transTimes,"ease-in-out",function(){r.parentNode.removeChild(r),s.animWrapEl.style.cssText="position: absolute; width: 100%; top: 0; z-index: 99;"});for(var l=0;l<n.length;l++)this.setButton(n[l])},resetNavbar:function(){this.removeButton(),this.animWrapEl.innerHTML=""},getButton:function(t){return this.wrapEl.querySelector('a[data-id="'+t+'"]')},removeButton:function(t){function e(t){t&&(t.handler&&t.removeEventListener("click",t.handler),t.parentNode.removeChild(t))}if(t){if("string"==typeof t)var n=this.getButton(t);else if(t instanceof HTMLElement)var n=t;e(n)}else for(var i=this.wrapEl.querySelectorAll("a"),a=0;a<i.length;a++)e(i[a])}});var V=[];return m.initPlugins=function(){for(var t in m.plugins){var e=m.plugins[t](m,m.options[t]);e&&V.push(e)}},m.pluginHook=function(t){for(var e=0;e<V.length;e++)V[e].hooks&&t in V[e].hooks&&V[e].hooks[t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])},m.pluginPrevent=function(t){for(var e=!1,n=0;n<V.length;n++)V[n].prevents&&t in V[n].prevents&&V[n].prevents[t](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])&&(e=!0);return e},m.pluginProcess=function(t,e){for(var n=e,i=0;i<V.length;i++)V[i].preprocess&&process in V[i].preprocess&&(n=V[i].preprocess[process](e,arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]));return n},m.initPlugins(),m.Content=new W(m.contentEl,{cacheLength:m.options.cacheLength}),m.options.enableNavbar&&(m.element.className+=" enableNavbar",m.Navbar=new c(m.navbarEl,{tpl:m.options.headerTpl,cls:m.options.headerCls})),m.options.enableTransition&&(m.element.className+=" enableTransition"),m.options.enableScroll&&(m.element.className+=" enableScroll"),m.options.enableToolbar&&(m.element.className+=" enableToolbar"),"onorientationchange"in u&&window.addEventListener("onorientationchange",function(){setTimeout(function(){m.refreshContent(),m.trigger("orientaion:change"),m.log("[Window][Orientaion Change]")},10)},!1),window.addEventListener("resize",function(){setTimeout(function(){m.refreshContent(),m.trigger("screen:resize"),m.log("[Window][Screen Resize]")},10)}),m.log("[App][Start]"),m.pluginHook("appInit"),n&&n.apply(this,arguments),m.History.start(),m.options.initPage&&m.History.navigate(m.options.initPage,{replace:!0}),m};r.prototype.device=function(){var t={},e=navigator.userAgent,n=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),r=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/);if(t.ios=t.android=t.iphone=t.ipad=!1,n&&(t.os="android",t.osVersion=n[2],t.android=!0),(a||r||s)&&(t.os="ios",t.ios=!0),r&&!s&&(t.osVersion=r[2].replace(/_/g,"."),t.iphone=!0),a&&(t.osVersion=a[2].replace(/_/g,"."),t.ipad=!0),s&&(t.osVersion=s[3]?s[3].replace(/_/g,"."):null,t.iphone=!0),t.webView=(r||a||s)&&e.match(/.*AppleWebKit(?!.*Safari)/i),t.os&&"ios"===t.os){var o=t.osVersion.split(".");t.minimalUi=!t.webView&&(s||r)&&(1*o[0]===7?1*o[1]>=1:1*o[0]>7)&&i('meta[name="viewport"]').length>0&&i('meta[name="viewport"]').attr("content").indexOf("minimal-ui")>=0}var l=i(window).width(),h=i(window).height();if(t.statusBar=!1,t.statusBar=t.webView&&(320===l&&568===h||568===l&&320===h||320===l&&480===h||480===l&&320===h||768===l&&1024===h||1024===l&&768===h)?!0:!1,t.pixelRatio=window.devicePixelRatio||1,t.os){var c=t.os+" "+t.os+"-"+t.osVersion.split(".")[0]+" "+t.os+"-"+t.osVersion.replace(/\./g,"-");if("ios"===t.os)for(var u=parseInt(t.osVersion.split(".")[0],10),g=u-1;g>=6;g--)c+=" ios-gt-"+g;i("html").addClass(c)}return t.statusBar?i("html").addClass("with-statusbar-overlay"):i("html").removeClass("with-statusbar-overlay"),t}(),n.exports=r});